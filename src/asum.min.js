function asum_ajax(e,t=null,r="GET",a=null,o){event.preventDefault();let s=e.innerHTML;if(e.innerHTML="<i class='fas fa-circle-notch fa-spin'></i>",null===a)var i=e.getAttribute("href");else i=a;$.ajax({type:r,url:i,data:t,cache:!1,processData:!1,success:function(t){"success"===t.status?(e.innerHTML="<i class='fas fa-check'></i>",setTimeout(function(){e.innerHTML=s},1e3),void 0!==t.redirect&&setTimeout(function(){window.top.location=t.redirect},3e3),void 0!==t.download&&(window.top.location=t.download),!0===t.refresh&&setTimeout(location.reload(),4e3),void 0!==o&&window[o](t.callback_data)):"error"===t.status&&(e.innerHTML="<i class='fas fa-times'></i>",setTimeout(function(){e.innerHTML=s},1e3),ealert.fire("error",t.message,"Error"))},error:function(e){ealert.fire("error",e,"Error")}})}$(document).delegate("form","submit",function(e){let t=$(this),r=t.serialize(),a=t.attr("method"),o=t.attr("feedback"),s=t.attr("id"),i=t.attr("action"),c=t.attr("enctype"),n=t.attr("verify"),u=t.attr("direct"),l=t.attr("reset"),d=t.attr("alert"),f=t.attr("callback"),w=!1;if("true"===u)return!0;e.preventDefault(),ealert.fire("info","Processing your request. Please wait."),async function(){if(await async function(){if("true"!==n)return w=!0,!0;{const{value:e}=await Swal.fire({title:"<h4>Enter your password</h4>",input:"password",inputPlaceholder:"Enter your password",inputAttributes:{maxlength:10,autocapitalize:"off",autocorrect:"off"},allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",footer:'<span class="font-gray font-xs text-center">We need you to authorize this action by providing your account password.This is a safety measure to protect your account</span>'});e&&await $.ajax({type:"POST",url:base_url+"/user/password_check",data:"pass="+e,cache:!1,processData:!1,success:function(e){return!0===e.status?(swal.fire("Processing","Processing your request. Please wait...","info"),w=!0,!0):!1===e.status?(swal.fire("Incorrect Password","","error"),w=!1,!1):void 0},error:function(e,t,r){alert("XHR ERROR "+XMLHttpRequest.status)}})}}(),!0===w)if(null===i&&(i=window.location.href),void 0===c)$.ajax({type:a,url:i,data:r,cache:!1,processData:!1,success:function(e){"success"===e.status?("false"!==o&&(void 0===d?swal("Success",e.message,"success"):"ealert"===d&&ealert.fire("success",e.message)),void 0!==e.redirect&&setTimeout(function(){window.top.location=e.redirect},3e3),!0===e.refresh&&setTimeout(location.reload(),4e3),void 0!==e.download&&(window.top.location=e.download),void 0!==f&&window[f](e.callback_data)):"error"===e.status&&swal("Error",e.message,"error")},error:function(e){ealert.fire("error",e)}}),!0===l&&t.trigger("reset");else{var e=document.getElementById(s);$.ajax({url:i,type:a,data:new FormData(e),enctype:"multipart/form-data",contentType:!1,cache:!1,processData:!1,beforeSend:function(){void 0===d?swal("Success","Uploading file","success"):"ealert"===d&&ealert.fire("success","Uploading file")},success:function(e){"success"===e.status?(void 0===d?swal("Success",e.message,"success"):"ealert"===d&&ealert.fire("success",e.message),void 0!==e.redirect&&setTimeout(function(){window.top.location=e.redirect},3e3),!0===e.refresh&&setTimeout(location.reload(),4e3),void 0!==e.download&&(window.top.location=e.download),void 0!==f&&window[f](e.callback_data)):"error"===e.status&&swal("Error",e.message,"error"),!0===l&&t.trigger("reset")},error:function(e,t,r){ealert.fire("success",e.responseText)}})}}()});